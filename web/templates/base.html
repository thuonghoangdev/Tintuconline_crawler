<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}VN News{% endblock %}</title>
  <style>
    :root{
      --bg:#0e1116; --card:#161a22; --muted:#8a94a7; --text:#e6ebf5; --brand:#3ea6ff;
      --ring:#263247; --border:#1f2530; --accent:#1b2432;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);
      font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue","Noto Sans",Arial}
    a{color:var(--text);text-decoration:none}
    a:hover{color:#fff}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    .header{display:flex;gap:18px;align-items:center;justify-content:space-between;margin-bottom:18px}
    .brand{font-weight:800;font-size:22px;color:#7cc0ff}
    .search{flex:1;display:flex;justify-content:center}
    .search form{width:100%;max-width:680px;display:flex;gap:8px}
    .search input,
    .search select{
      padding:12px 14px;border-radius:12px;border:1px solid var(--ring);
      background:var(--card);color:var(--text);outline:0;font-size:15px
    }
    .search input{flex:1}
    .search select{min-width:130px}
    .nav{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
    .chip{
      display:inline-block;padding:6px 10px;border-radius:999px;border:1px solid var(--border);
      background:var(--accent);color:var(--text);font-size:13px
    }
    .muted{color:var(--muted)}
    .grid{display:grid;gap:16px}
    .grid.cards{grid-template-columns:repeat(1,minmax(0,1fr))}
    @media(min-width:640px){.grid.cards{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media(min-width:960px){.grid.cards{grid-template-columns:repeat(3,minmax(0,1fr))}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;overflow:hidden}
    .card .cover{display:block;background:#0b0f15}
    .card .cover img{width:100%;height:200px;object-fit:cover;display:block}
    .card .body{padding:14px}
    .title{font-weight:700;font-size:18px;line-height:1.35;margin:4px 0 6px}
    .excerpt{font-size:14px;color:var(--muted)}
    .meta{font-size:12px;color:var(--muted)}
    .btn{
      display:inline-flex;gap:8px;align-items:center;
      padding:10px 12px;border-radius:10px;border:1px solid var(--border);
      background:var(--accent);color:var(--text);cursor:pointer
    }
    .btn:hover{border-color:var(--ring)}
    .hr{height:1px;background:var(--border);margin:18px 0}

    /* =========================
       ẢNH TRONG BÀI — ANTI-DISTORT
       ========================= */
    .prose figure{margin:14px 0}
    .prose figcaption{margin-top:6px;font-size:0.92rem;color:var(--muted)}
    .prose figure img,
    .prose img{
      display:block;max-width:100%;height:auto;
      border-radius:12px;max-height:72vh;object-fit:contain;background:#0b0f15;
    }
    .prose img[width], .prose img[height]{width:auto !important;height:auto !important}
    #article > img{
      width:100%;max-height:440px;object-fit:cover;display:block;border-radius:12px;background:#0b0f15;
    }
    .rel-grid .card .cover img{
      width:100%;height:220px;object-fit:cover;display:block;border-radius:12px;background:#0b0f15;
    }
  </style>
  {% block extra_head %}{% endblock %}
</head>
<body>
  <header class="container header">
    <a class="brand" href="{% url 'home' %}">VN News</a>

    <div class="search">
      <form method="get" action="{% url 'home' %}">
        <input name="q" value="{{ request.GET.q|default:'' }}" placeholder="Tìm bài..." />
      </form>
    </div>

    <div>
      {% if request.user.is_authenticated %}
        <a class="btn" href="{% url 'submit_article' %}">Đăng bài</a>
        <a class="chip" href="{% url 'my_articles' %}" style="margin-left:6px">Bài của tôi</a>
        <a class="chip" href="{% url 'logout' %}" style="margin-left:6px">Đăng xuất</a>
      {% else %}
        <a class="btn" href="{% url 'login' %}">Đăng nhập</a>
        <a class="chip" href="{% url 'register' %}" style="margin-left:6px">Đăng ký</a>
      {% endif %}
    </div>
  </header>


  <nav class="container nav">
    {% if categories %}
      {% for c in categories %}
        <a class="chip" href="{% url 'category' slug=c.slug %}">{{ c.name }}</a>
      {% endfor %}
    {% endif %}
  </nav>

  <main class="container">
    {% block content %}{% endblock %}
  </main>

  <footer class="container" style="margin:40px 0 24px;color:var(--muted);text-align:center">
    © VN News
  </footer>

  {% block extra_scripts %}{% endblock %}
</body>
</html>
